model:
  out_names:
  - PRATEsfc
  in_names:
  - PRATEsfc
  - eastward_wind_at_ten_meters
  - northward_wind_at_ten_meters
  loss:
    type: MSE
  module:
    config:
      model_channels: 64
      attn_resolutions: [16]
      channel_mult: [1, 2, 2, 2]
    type: unet_diffusion_song
  normalization:
    coarse:
      global_means_path: /climate-default/2025-02-27-downscaling-data/stats/100km/centering.nc
      global_stds_path: /climate-default/2025-02-27-downscaling-data/stats/100km/scaling-full-field.nc
    fine:
      global_means_path: /climate-default/2025-02-27-downscaling-data/stats/25km/centering.nc
      global_stds_path: /climate-default/2025-02-27-downscaling-data/stats/25km/scaling-full-field.nc
  num_diffusion_generation_steps: 18
  churn: 0.0
  p_mean: -1.2
  p_std: 1.8
  predict_residual: true
  sigma_max: 150.0
  sigma_min: 0.002
  use_fine_topography: false
optimization:
  lr: 0.0001
  optimizer_type: Adam
ema:
  decay: 0.999
validate_using_ema: true
train_data:
  #sample_with_replacement: 120
  batch_size: 128
  num_data_workers: 4
  fine:
  - data_path: /climate-default/2025-02-27-downscaling-data
    file_pattern: 25km.zarr
    engine: zarr
    subset:
      interval_length: 6d
      start: 0d
      block_length: 7d
  coarse:
  - data_path: /climate-default/2025-02-27-downscaling-data
    file_pattern: 100km.zarr
    engine: zarr
    subset:
      interval_length: 6d
      start: 0d
      block_length: 7d
  #lat_extent:
  #  start: -66.0
  #  stop: 70.0
  # CONUS
  lat_extent:
    start: 22.0
    stop: 50.0
  lon_extent:
    start: 230.0
    stop: 295.0
  strict_ensemble: false
validation_data:
  batch_size: 128
  num_data_workers: 4
  fine:
  - data_path: /climate-default/2025-02-27-downscaling-data
    engine: zarr
    file_pattern: 25km.zarr
    subset:
      interval_length: 1d
      start: 6d
      block_length: 17d
  coarse:
  - data_path: /climate-default/2025-02-27-downscaling-data
    engine: zarr
    file_pattern: 100km.zarr
    subset:
      interval_length: 1d
      start: 6d
      block_length: 17d
  lat_extent:
    start: -8.0
    stop: 8.0
  lon_extent:
    start: 100.0
    stop: 300.0
  strict_ensemble: false
coarse_patch_extent_lat: 16
coarse_patch_extent_lon: 16
max_epochs: 20
validate_interval: 1
experiment_dir: /results
save_checkpoints: true
logging:
  project: annak-downscaling
  entity: ai2cm
  log_to_wandb: true
generate_n_samples: 2