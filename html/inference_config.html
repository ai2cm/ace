<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Evaluator Config" href="evaluator_config.html" /><link rel="prev" title="Training Config" href="training_config.html" />

    <link rel="shortcut icon" href="_static/Ai2_icon_pink_RGB.png"/><!-- Generated with Sphinx 7.0.0 and Furo 2024.04.27 -->
        <title>Inference Config - fme v2025.7.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=46965ee0ad39e5260c2467c27b94afaae98bd900" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">fme v2025.7.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/Ai2_icon_pink_padding_RGB.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/Ai2_icon_pink_padding_RGB.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">fme v2025.7.0</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="training_config.html">Training Config</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Inference Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluator_config.html">Evaluator Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcs_access.html">Accessing data via Google Cloud Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder.html">The Builder Pattern: Modern Namelists</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="inference-config">
<span id="id1"></span><h1>Inference Config<a class="headerlink" href="#inference-config" title="Permalink to this heading">¶</a></h1>
<p>The following is an example configuration for running inference.
While you can use absolute paths in the config yamls (we encourage it!), the example uses paths relative to the directory you run the command.
The example assumes you are running in a directory structure like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── ace2_era5_ckpt.tar
├── initial_conditions
│   ├── ic_1940.nc
│   ├── ic_1950.nc
│   ├── ...
│   └── ic_2020.nc
├── forcing_data
│   ├── forcing_1940.nc
│   ├── forcing_1941.nc
│   ├── ...
│   └── forcing_1989.nc
└── inference-config.yaml
</pre></div>
</div>
<p>that includes a model checkpoint (<code class="docutils literal notranslate"><span class="pre">ace2_era5_ckpt.tar</span></code>), forcing data (e.g., <code class="docutils literal notranslate"><span class="pre">forcing_1940.nc</span></code>), and initial conditions (e.g., <code class="docutils literal notranslate"><span class="pre">ic_1940.nc</span></code>).
You can find the checkpoint and forcing and initial condition data in the <a class="reference external" href="https://huggingface.co/allenai/ACE2-ERA5">ACE2-ERA5 Hugging Face page</a>.</p>
<p>The specified initial condition file should contain a time dimension of at least length 1, but can also
contain multiple times. If multiple times are present and <code class="docutils literal notranslate"><span class="pre">start_indices</span></code> is not specified in the
<a class="reference internal" href="api.html#fme.ace.InitialConditionConfig" title="fme.ace.InitialConditionConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InitialConditionConfig</span></code></a> configuration, the inference will run an ensemble using all times
in the initial condition file.  The <code class="docutils literal notranslate"><span class="pre">ic_1940.nc</span></code> file is an example of a file with multiple times, containing
initial conditions for each month of 1940.  For examples of selecting specific initial
conditions, see <a class="reference internal" href="#initial-condition-examples"><span class="std std-ref">fme.ace.InitialConditionConfig Examples</span></a>.</p>
<p>While netCDFs files are specified in the example, zarr stores are also compatible, e.g.,
specifying the parent folder containing the zarr store directory as the <code class="docutils literal notranslate"><span class="pre">path</span></code>, setting <code class="docutils literal notranslate"><span class="pre">engine</span></code> to “zarr”, and setting <code class="docutils literal notranslate"><span class="pre">file_pattern</span></code> to “&lt;zarr_store_name&gt;.zarr”
in the dataset configuration.  See <a class="reference internal" href="api.html#fme.ace.XarrayDataConfig" title="fme.ace.XarrayDataConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.XarrayDataConfig</span></code></a> for more information.</p>
<section id="example-yaml-configuration">
<h2>Example YAML Configuration<a class="headerlink" href="#example-yaml-configuration" title="Permalink to this heading">¶</a></h2>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example YAML Configuration</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">experiment_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inference_output</span>
<span class="nt">n_forward_steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span><span class="w"> </span><span class="c1"># 100 days</span>
<span class="nt">forward_steps_in_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="nt">checkpoint_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ace2_era5_ckpt.tar</span>
<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">log_to_screen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">log_to_wandb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">log_to_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ace</span>
<span class="w">  </span><span class="nt">entity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your_wandb_entity</span>
<span class="nt">initial_condition</span><span class="p">:</span>
<span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial_conditions/ic_1940.nc</span>
<span class="w">  </span><span class="nt">start_indices</span><span class="p">:</span>
<span class="w">    </span><span class="nt">n_initial_conditions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">forcing_loader</span><span class="p">:</span>
<span class="w">  </span><span class="nt">dataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">data_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">forcing_data</span>
<span class="w">  </span><span class="nt">num_data_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">data_writer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">save_prediction_files</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
</div>
</section>
<section id="configuration-structure">
<h2>Configuration structure<a class="headerlink" href="#configuration-structure" title="Permalink to this heading">¶</a></h2>
<p>We use the <a class="reference internal" href="builder.html#builder-pattern"><span class="std std-ref">Builder pattern</span></a> to load this configuration into a multi-level dataclass structure.
The configuration is divided into several sub-configurations, each with its own dataclass.
The top-level configuration is the <a class="reference internal" href="api.html#fme.ace.InferenceConfig" title="fme.ace.InferenceConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InferenceConfig</span></code></a> class.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">InferenceConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_forward_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logging</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forcing_loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward_steps_in_memory=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_writer=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregator=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stepper_override=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_incompatible_dataset=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/inference/inference.html#InferenceConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for running inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>experiment_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Directory to save results to.</p></li>
<li><p><strong>n_forward_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Number of steps to run the model forward for.</p></li>
<li><p><strong>checkpoint_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Path to stepper checkpoint to load.</p></li>
<li><p><strong>logging</strong> (<a class="reference internal" href="api.html#fme.ace.LoggingConfig" title="fme.core.logging_utils.LoggingConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggingConfig</span></code></a>) – Configuration for logging.</p></li>
<li><p><strong>initial_condition</strong> (<a class="reference internal" href="api.html#fme.ace.InitialConditionConfig" title="fme.ace.inference.inference.InitialConditionConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">InitialConditionConfig</span></code></a>) – Configuration for initial condition data.</p></li>
<li><p><strong>forcing_loader</strong> (<a class="reference internal" href="api.html#fme.ace.ForcingDataLoaderConfig" title="fme.ace.data_loading.inference.ForcingDataLoaderConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForcingDataLoaderConfig</span></code></a>) – Configuration for forcing data.</p></li>
<li><p><strong>forward_steps_in_memory</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">10</span></code>) – Number of forward steps to complete in memory
at a time.</p></li>
<li><p><strong>data_writer</strong> (<a class="reference internal" href="api.html#fme.ace.DataWriterConfig" title="fme.ace.inference.data_writer.main.DataWriterConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataWriterConfig</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">&lt;factory&gt;</span></code>) – Configuration for data writers.</p></li>
<li><p><strong>aggregator</strong> (<a class="reference internal" href="api.html#fme.ace.InferenceAggregatorConfig" title="fme.ace.aggregator.inference.main.InferenceAggregatorConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceAggregatorConfig</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">&lt;factory&gt;</span></code>) – Configuration for inference aggregator.</p></li>
<li><p><strong>stepper_override</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="api.html#fme.ace.StepperOverrideConfig" title="fme.ace.stepper.single_module.StepperOverrideConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">StepperOverrideConfig</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Configuration for overriding select stepper configuration
options at inference time (optional).</p></li>
<li><p><strong>allow_incompatible_dataset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">False</span></code>) – If True, allow the dataset used for inference
to be incompatible with the dataset used for stepper training. This should
be used with caution, as it may allow the stepper to make scientifically
invalid predictions, but it can allow running inference with incorrectly
formatted or missing grid information.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>The sub-configurations are:</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">LoggingConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ace'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ai2cm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_to_screen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_to_wandb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%(asctime)s</span> <span class="pre">-</span> <span class="pre">%(name)s</span> <span class="pre">-</span> <span class="pre">%(levelname)s</span> <span class="pre">-</span> <span class="pre">%(message)s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wandb_dir_in_experiment_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/core/logging_utils.html#LoggingConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">'ace'</span></code>) – Name of the project in Weights &amp; Biases.</p></li>
<li><p><strong>entity</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">'ai2cm'</span></code>) – Name of the entity in Weights &amp; Biases.</p></li>
<li><p><strong>log_to_screen</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to log to the screen.</p></li>
<li><p><strong>log_to_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to log to a file.</p></li>
<li><p><strong>log_to_wandb</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to log to Weights &amp; Biases.</p></li>
<li><p><strong>log_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">'%(asctime)s</span> <span class="pre">-</span> <span class="pre">%(name)s</span> <span class="pre">-</span> <span class="pre">%(levelname)s</span> <span class="pre">-</span> <span class="pre">%(message)s'</span></code>) – Format of the log messages.</p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">20</span></code>) – Sets the logging level.</p></li>
<li><p><strong>wandb_dir_in_experiment_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">False</span></code>) – Whether to create the wandb_dir in the
experiment_dir or in local /tmp (default False).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">InitialConditionConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'netcdf4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/inference/inference.html#InitialConditionConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for initial conditions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data specified under path should contain a time dimension of at least
length 1. If multiple times are present in the dataset specified by <code class="docutils literal notranslate"><span class="pre">path</span></code>,
the inference will start an ensemble simulation using each IC along a
leading sample dimension. Specific times can be selected from the dataset
by using <code class="docutils literal notranslate"><span class="pre">start_indices</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – The path to the initial conditions dataset.</p></li>
<li><p><strong>engine</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">'netcdf4'</span></code>, <code class="docutils literal notranslate"><span class="pre">'h5netcdf'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zarr'</span></code>], default: <code class="docutils literal notranslate"><span class="pre">'netcdf4'</span></code>) – The engine used to open the dataset.</p></li>
<li><p><strong>start_indices</strong> (<a class="reference external" href="https://docs.python.org/3/library/types.html#types.UnionType" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code></a>[<a class="reference internal" href="api.html#fme.ace.InferenceInitialConditionIndices" title="fme.ace.data_loading.inference.InferenceInitialConditionIndices"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceInitialConditionIndices</span></code></a>, <a class="reference internal" href="api.html#fme.ace.ExplicitIndices" title="fme.ace.data_loading.inference.ExplicitIndices"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExplicitIndices</span></code></a>, <a class="reference internal" href="api.html#fme.ace.TimestampList" title="fme.ace.data_loading.inference.TimestampList"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimestampList</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – optional specification of the subset of
initial conditions to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">ForcingDataLoaderConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_data_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perturbations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistence_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/data_loading/inference.html#ForcingDataLoaderConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for the forcing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<a class="reference internal" href="api.html#fme.ace.XarrayDataConfig" title="fme.core.dataset.config.XarrayDataConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">XarrayDataConfig</span></code></a> | <a class="reference internal" href="api.html#fme.ace.MergeNoConcatDatasetConfig" title="fme.core.dataset.config.MergeNoConcatDatasetConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergeNoConcatDatasetConfig</span></code></a>) – Configuration to define the dataset.</p></li>
<li><p><strong>num_data_workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">0</span></code>) – Number of parallel workers to use for data loading.</p></li>
<li><p><strong>perturbations</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="api.html#fme.ace.SSTPerturbation" title="fme.ace.data_loading.perturbation.SSTPerturbation"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSTPerturbation</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Configuration for SST perturbations
used in forcing data.</p></li>
<li><p><strong>persistence_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Names of variables for which all returned values
will be the same as the initial condition. When evaluating initial
condition predictability, set this to forcing variables that should
not be updated during inference (e.g. surface temperature).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">XarrayDataConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_pattern='*.nc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_repeats=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine='netcdf4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dimensions='latlon'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infer_timestep=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype='float32'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_nans=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isel=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/core/dataset/config.html#XarrayDataConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Path to the data.</p></li>
<li><p><strong>file_pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">'*.nc'</span></code>) – Glob pattern to match files in the data_path.</p></li>
<li><p><strong>n_repeats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">1</span></code>) – Number of times to repeat the dataset (in time). It is up
to the user to ensure that the input dataset to repeat results in
data that is reasonably continuous across repetitions.</p></li>
<li><p><strong>engine</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">'netcdf4'</span></code>, <code class="docutils literal notranslate"><span class="pre">'h5netcdf'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zarr'</span></code>], default: <code class="docutils literal notranslate"><span class="pre">'netcdf4'</span></code>) – Backend used in xarray.open_dataset call.</p></li>
<li><p><strong>spatial_dimensions</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">'healpix'</span></code>, <code class="docutils literal notranslate"><span class="pre">'latlon'</span></code>], default: <code class="docutils literal notranslate"><span class="pre">'latlon'</span></code>) – Specifies the spatial dimensions for the grid, default
is lat/lon. If ‘latlon’, it is assumed that the last two dimensions are
latitude and longitude, respectively. If ‘healpix’, it is assumed that the
last three dimensions are face, height, and width, respectively.</p></li>
<li><p><strong>subset</strong> (<a class="reference internal" href="api.html#fme.ace.Slice" title="fme.core.typing_.Slice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Slice</span></code></a> | <a class="reference internal" href="api.html#fme.ace.TimeSlice" title="fme.core.dataset.config.TimeSlice"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSlice</span></code></a> | <a class="reference internal" href="api.html#fme.ace.RepeatedInterval" title="fme.core.dataset.config.RepeatedInterval"><code class="xref py py-class docutils literal notranslate"><span class="pre">RepeatedInterval</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">&lt;factory&gt;</span></code>) – Slice defining a subset of the XarrayDataset to load. This can
either be a <cite>Slice</cite> of integer indices or a <cite>TimeSlice</cite> of timestamps.
This feature is applied directly to the dataset samples. For example,
if the file(s) have the time coordinate (t0, t1, t2, t3) and
requirements.n_timesteps=2, then subset=Slice(stop=2) will
provide two samples: (t0, t1), (t1, t2).</p></li>
<li><p><strong>infer_timestep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to infer the timestep from the provided data.
This should be set to True (the default) for ACE training. It may
be useful to toggle this to False for applications like downscaling,
which do not depend on the timestep of the data and therefore lack
the additional requirement that the data be ordered and evenly
spaced in time. It must be set to True if n_repeats &gt; 1 in order
to be able to infer the full time coordinate.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">'float32'</span></code>) – Data type to cast the data to. If None, no casting is done. It is
required that ‘torch.{dtype}’ is a valid dtype.</p></li>
<li><p><strong>overwrite</strong> (<a class="reference internal" href="api.html#fme.ace.OverwriteConfig" title="fme.core.dataset.config.OverwriteConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">OverwriteConfig</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">&lt;factory&gt;</span></code>) – Optional OverwriteConfig to overwrite loaded field values.</p></li>
<li><p><strong>fill_nans</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="api.html#fme.ace.FillNaNsConfig" title="fme.core.dataset.config.FillNaNsConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">FillNaNsConfig</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Optional FillNaNsConfig to fill NaNs with a constant value.</p></li>
<li><p><strong>isel</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="api.html#fme.ace.Slice" title="fme.core.typing_.Slice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Slice</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">&lt;factory&gt;</span></code>) – Optional xarray isel arguments to be passed to the dataset. Will
raise ValueError if time is included here, since the subset argument
is used specifically for selecting times. Horizontal dimensions are
also not currently supported.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>If data is stored in a directory with multiple netCDF files which can be
concatenated along the time dimension, use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fme</span><span class="o">.</span><span class="n">ace</span><span class="o">.</span><span class="n">XarrayDataConfig</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s2">&quot;/some/directory&quot;</span><span class="p">,</span> <span class="n">file_pattern</span><span class="o">=</span><span class="s2">&quot;*.nc&quot;</span><span class="p">)</span> 
</pre></div>
</div>
<p>If data is stored in a single zarr store at <code class="docutils literal notranslate"><span class="pre">/some/directory/dataset.zarr</span></code>,
use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fme</span><span class="o">.</span><span class="n">ace</span><span class="o">.</span><span class="n">XarrayDataConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data_path</span><span class="o">=</span><span class="s2">&quot;/some/directory&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">file_pattern</span><span class="o">=</span><span class="s2">&quot;dataset.zarr&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;zarr&quot;</span>
<span class="gp">... </span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">DataWriterConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_extended_video_netcdfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_prediction_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_monthly_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_histogram_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_coarsen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/inference/data_writer/main.html#DataWriterConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for inference data writers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_extended_video_netcdfs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">False</span></code>) – Whether to enable writing of netCDF files
containing video metrics.</p></li>
<li><p><strong>save_prediction_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to enable writing of netCDF files
containing the predictions and target values.</p></li>
<li><p><strong>save_monthly_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to enable writing of netCDF files
containing the monthly predictions and target values.</p></li>
<li><p><strong>names</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Names of variables to save in the prediction, histogram, and monthly
netCDF files.</p></li>
<li><p><strong>save_histogram_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">False</span></code>) – Enable writing of netCDF files containing histograms.</p></li>
<li><p><strong>time_coarsen</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="api.html#fme.ace.TimeCoarsenConfig" title="fme.ace.inference.data_writer.time_coarsen.TimeCoarsenConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeCoarsenConfig</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Configuration for time coarsening of written outputs.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">InferenceAggregatorConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_mean_reference_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_global_mean_time_series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/aggregator/inference/main.html#InferenceAggregatorConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for inference aggregator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_mean_reference_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Path to reference time means to compare against.</p></li>
<li><p><strong>log_global_mean_time_series</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) – Whether to log global mean time series metrics.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fme.ace.</span></span><span class="sig-name descname"><span class="pre">StepperOverrideConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ocean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'keep'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_call</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'keep'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fme/ace/stepper/single_module.html#StepperOverrideConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configuration for overriding stepper configuration options.</p>
<p>The default value for each parameter is <code class="docutils literal notranslate"><span class="pre">&quot;keep&quot;</span></code>, which denotes that the
serialized stepper’s configuration will not be modified when loaded. Passing
other values will override the configuration of the loaded stepper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ocean</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">'keep'</span></code>], <a class="reference internal" href="api.html#fme.ace.OceanConfig" title="fme.core.ocean.OceanConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">OceanConfig</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">'keep'</span></code>) – Ocean configuration to override that used in producing a serialized
stepper.</p></li>
<li><p><strong>multi_call</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">'keep'</span></code>], <a class="reference internal" href="api.html#fme.ace.MultiCallConfig" title="fme.core.multi_call.MultiCallConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiCallConfig</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>], default: <code class="docutils literal notranslate"><span class="pre">'keep'</span></code>) – MultiCall configuration to override that used in producing a
serialized stepper.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="fme-ace-initialconditionconfig-examples">
<span id="initial-condition-examples"></span><h2><a class="reference internal" href="api.html#fme.ace.InitialConditionConfig" title="fme.ace.InitialConditionConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InitialConditionConfig</span></code></a> Examples<a class="headerlink" href="#fme-ace-initialconditionconfig-examples" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">start_indices</span></code> attribute can be used to specify which initial conditions
to use when multiple are present in the dataset (instead of using all available).
The following examples show example selections using the yaml builder pattern for
an <code class="docutils literal notranslate"><span class="pre">InitialConditionConfig</span></code>.</p>
<section id="fme-ace-inferenceinitialconditionindices">
<h3><a class="reference internal" href="api.html#fme.ace.InferenceInitialConditionIndices" title="fme.ace.InferenceInitialConditionIndices"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InferenceInitialConditionIndices</span></code></a><a class="headerlink" href="#fme-ace-inferenceinitialconditionindices" title="Permalink to this heading">¶</a></h3>
<p>Select a number of regularly spaced initial conditions.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial_conditions.nc</span>
<span class="nt">start_indices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">n_initial_conditions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
</section>
<section id="fme-ace-timestamplist">
<h3><a class="reference internal" href="api.html#fme.ace.TimestampList" title="fme.ace.TimestampList"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.TimestampList</span></code></a><a class="headerlink" href="#fme-ace-timestamplist" title="Permalink to this heading">¶</a></h3>
<p>Selecting two timestamps from the initial conditions.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial_conditions.nc</span>
<span class="nt">start_indices</span><span class="p">:</span>
<span class="w">   </span><span class="nt">times</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;2021-01-01T00:00:00&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;2021-02-01T00:00:00&quot;</span>
</pre></div>
</div>
</section>
<section id="fme-ace-explicitindices">
<h3><a class="reference internal" href="api.html#fme.ace.ExplicitIndices" title="fme.ace.ExplicitIndices"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.ExplicitIndices</span></code></a><a class="headerlink" href="#fme-ace-explicitindices" title="Permalink to this heading">¶</a></h3>
<p>Selecting specific indices from the initial conditions.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial_conditions.nc</span>
<span class="nt">start_indices</span><span class="p">:</span>
<span class="w">   </span><span class="nt">list</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">7</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="evaluator_config.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Evaluator Config</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="training_config.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Training Config</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Allen Institute for Artificial Intelligence
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/ai2cm/ace" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Inference Config</a><ul>
<li><a class="reference internal" href="#example-yaml-configuration">Example YAML Configuration</a></li>
<li><a class="reference internal" href="#configuration-structure">Configuration structure</a></li>
<li><a class="reference internal" href="#fme-ace-initialconditionconfig-examples"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InitialConditionConfig</span></code> Examples</a><ul>
<li><a class="reference internal" href="#fme-ace-inferenceinitialconditionindices"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.InferenceInitialConditionIndices</span></code></a></li>
<li><a class="reference internal" href="#fme-ace-timestamplist"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.TimestampList</span></code></a></li>
<li><a class="reference internal" href="#fme-ace-explicitindices"><code class="xref py py-class docutils literal notranslate"><span class="pre">fme.ace.ExplicitIndices</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>